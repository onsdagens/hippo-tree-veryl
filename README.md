# Hippomenes Tree

This is a pure Veryl implementation of an arbitration tree intended for the [Hippomenes](https://github.com/perlindgren/hippomenes) NCLIC interrupt controller.

The tree takes an array of signals, and returns the smallest/largest value and it's index. If only the actual underlying value is of interest,
one could remove the index tracking, slightly improving the design, however, for our use case this is out of scope.

The original SystemVerilog implementation is available [here](https://github.com/onsdagens/hippomenes-tree).

## Building

For transpiling to SystemVerilog, [Veryl](https://github.com/veryl-lang/veryl) is required. The tree relies on recursive functions, which is new language feature, so the Veryl toolchain must be compiled from source. 

With Veryl installed, transpiling can be done by 
```
veryl build
```
which results in a `./src/tree.sv` file.

## Testing

A simple testbench is included in the `./src/tests.veryl` file. For simulation, Verilator is required. An installation guide is available [here](https://verilator.org/guide/latest/install.html).

With Verilator and Veryl installed, the testbench can be ran using
```
veryl test
```

Waveforms can also be generated by running
```
veryl test --wave
```
which results in a `./src/test.vcd`. This can be opened by some waveform viewer (we recommend [Surfer](https://gitlab.com/surfer-project/surfer)).

## Synthesis TBD
